<!DOCTYPE html>
<html lang="en">
  <head>
    <title> Testing filter function </title>

    <script src = "scripts.js"></script>

    <script type="text/javascript">


        function filterScripts(array, test){
          let passed = [];
          for(let item of array){
            if(test(item)){
              passed.push(item);
            }
          }
          return passed;
        }

        // console.log(filterScripts(SCRIPTS, script => script.living));

        // Filter and map

        function map(array, transform){
          let mapped = [];
          for(let element of array){
            mapped.push(transform(element));
          }
          return mapped;
        }

        // let rtl = filterScripts(SCRIPTS, s => s.direction == "rtl");
        // console.log(map(rtl, s => s.name));

        // function average(array){
        //   return array.reduce((a, b) => a+b) / array.length;
        // }

        // console.log(Math.round(undefined));

        // console.log(Math.round(average(SCRIPTS.filter(s => s.living).map(s => s.year))));
        //
        // console.log(Math.round(average(SCRIPTS.filter(s => !s.living).map(s => s.year))));

        // function characterScript(code){
        //   for(let script of SCRIPTS){
        //     if(script.ranges.some(([from, to]) => {
        //        return code >= from && code < to;
        //     })){
        //       return script;
        //     }
        //   }
        //   return null;
        // }

        // let unic = "hello".codePointAt(0);
        // // console.log(unic);
        // console.log(characterScript(121));

        // console.log(["bhar", "g", "ava"].reduce((a, b) => a.concat(b)));  //flattening

        // function looping(value, test, update, body){
        //   debugger;
        //   while(value < 20){
        //       debugger;
        //       if(test(value)) body(value);
        //       else return null;
        //       value = update(value);
        //     }

            // for(value; test(value); value = update(value)){
            //   debugger;
            //   body(value);
            // }

          // }


        // looping(3, a => a < 10, a => a + 1, console.log);


        /* Implementing every function */

        // function every(array, test){
        //   // for(let i of array){
        //   //   if(test(i)) return true;
        //   //   else return false;
        //   // }
        //
        //   //alternative way
        //
        //   return !(array.some(test));
        // }
        //
        // console.log(every([3, 6, 7], a => a > 5));

        /* decide writing direction */

        let  maxCount = [["ltr", 0], ["ttb", 0], ["rtl", 0]];

        function countMajorityDirection(items){

          // find and add direction to items

          // findAddDir(items);


          for(let item of items){

              let uni = item.codePointAt(0);

              for(let script of SCRIPTS){
                if(script.ranges.some( ([from, to]) => {
                  return uni >= from && uni < to;
                })){
                    switch(script.direction){
                      case "ltr":
                        console.log(uni, item, script.direction);
                        maxCount[0][1]++;
                        break;
                      case "ttb":
                        console.log(uni, item, script.direction);
                        maxCount[1][1]++;
                        break;
                      case "rtl":
                        console.log(uni, item, script.direction);
                        maxCount[2][1]++;
                        break;
                    }
                }
            }
        }


          return maxCount[maxCount.findIndex(elem => {
            return elem[1] == Math.max(maxCount[0][1], maxCount[1][1], maxCount[2][1]);
          }) ][0];
        }


        console.log(countMajorityDirection(["كل", "ᠨᠭ", "ꡀꡁ"]));
        // console.log(SCRIPTS);

    </script>
  </head>
  <body>

  </body>
</html>
